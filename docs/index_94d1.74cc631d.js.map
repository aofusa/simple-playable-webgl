{"version":3,"sources":["/src/ShaderProgram.ts"],"sourcesContent":["import { initShaderProgram } from \"./Shader\"\n\n\nexport type AttribLocations = {\n\tvertexPosition: number,\n}\n\n\nexport type UniformLocations = {\n\tprojectionMatrix: WebGLUniformLocation,\n\tmodelViewMatrix: WebGLUniformLocation,\n}\n\n\nexport type ProgramInfo = {\n\tprogram: WebGLProgram,\n\tattribLocations: AttribLocations,\n\tuniformLocations: UniformLocations,\n}\n\n\n// 頂点シェーダプログラムのソースコード\nconst vsSource = `\n\tattribute vec4 aVertexPosition;\n\tuniform mat4 uModelViewMatrix;\n\tuniform mat4 uProjectionMatrix;\n\n\tvoid main() {\n\t\tgl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n\t}\n`\n\n// ピクセルシェーダプログラムのソースコード\nconst fsSource = `\n\tvoid main() {\n\t\tgl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\t}\n`\n\n\nexport function createShaderProgram(gl: WebGL2RenderingContext): ProgramInfo | null {\n\tconst shaderProgram = initShaderProgram(gl, vsSource, fsSource)\n\tif (shaderProgram === null) {\n\t\tconsole.warn(\"init shader program error\")\n\t\treturn null\n\t}\n\n\tconst vertexPosition = gl.getAttribLocation(shaderProgram, \"aVertexPosition\")\n\tconst projectionMatrix = gl.getUniformLocation(shaderProgram, \"uProjectionMatrix\")\n\tconst modelViewMatrix = gl.getUniformLocation(shaderProgram, \"uModelViewMatrix\")\n\tif (vertexPosition === null || vertexPosition === -1) {\n\t\tconsole.warn(\"get vertex position error\")\n\t}\n\tif (projectionMatrix === null || projectionMatrix === -1) {\n\t\tconsole.warn(\"get projection matrix error\")\n\t}\n\tif (modelViewMatrix === null || modelViewMatrix === -1) {\n\t\tconsole.warn(\"get model view matrix error\")\n\t}\n\n\tif (\n\t\tvertexPosition === null || projectionMatrix === null || modelViewMatrix === null ||\n\t\tvertexPosition === -1 || projectionMatrix === -1 || modelViewMatrix === -1\n\t) {\n\t\treturn null\n\t}\n\n\tconst programInfo: ProgramInfo = {\n\t\tprogram: shaderProgram,\n\t\tattribLocations: {\n\t\t\tvertexPosition: vertexPosition,\n\t\t},\n\t\tuniformLocations: {\n\t\t\tprojectionMatrix: projectionMatrix,\n\t\t\tmodelViewMatrix: modelViewMatrix,\n\t\t}\n\t}\n\n\treturn programInfo\n}\n"],"names":[],"mappings":";AAsBkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQlB;AAGkB;AAAA;AAAA;AAIlB"}