{"version":3,"sources":["/src/SimpleShaderProgram.ts","/src/ColorShaderProgram.ts"],"sourcesContent":["import { initShaderProgram } from \"./ShaderCompiler\"\nimport type { ProgramInfoInterface } from \"./ShaderProgramInterface\"\n\n\ntype AttribLocations = {\n\tvertexPosition: number,\n}\n\n\ntype UniformLocations = {\n\tprojectionMatrix: WebGLUniformLocation,\n\tmodelViewMatrix: WebGLUniformLocation,\n}\n\n\nexport class ProgramInfo implements ProgramInfoInterface {\n\tprogram: WebGLProgram\n\tattribLocations: Map<string, number>\n\tuniformLocations: Map<string, WebGLUniformLocation>\n\n\tconstructor(program: WebGLProgram, attribLocations: AttribLocations, uniformLocations: UniformLocations) {\n\t\tthis.program = program\n\t\tthis.attribLocations = new Map(Object.entries(attribLocations))\n\t\tthis.uniformLocations = new Map(Object.entries(uniformLocations))\n\t}\n\n\tgetProgram(): WebGLProgram {\n\t\treturn this.program\n\t}\n\n\tgetAttribLocation(name: string): number | undefined {\n\t\treturn this.attribLocations.get(name)\n\t}\n\n\tgetUniformLocation(name: string): WebGLUniformLocation | undefined {\n\t\treturn this.uniformLocations.get(name)\n\t}\n}\n\n\n// 頂点シェーダプログラムのソースコード\nconst vsSource = `\n\tattribute vec4 aVertexPosition;\n\tuniform mat4 uModelViewMatrix;\n\tuniform mat4 uProjectionMatrix;\n\n\tvoid main() {\n\t\tgl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n\t}\n`\n\n// ピクセルシェーダプログラムのソースコード\nconst fsSource = `\n\tvoid main() {\n\t\tgl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\t}\n`\n\n\nexport function createShaderProgram(gl: WebGL2RenderingContext): ProgramInfo | null {\n\tconst shaderProgram = initShaderProgram(gl, vsSource, fsSource)\n\tif (shaderProgram === null) {\n\t\tconsole.warn(\"init shader program error\")\n\t\treturn null\n\t}\n\n\tconst vertexPosition = gl.getAttribLocation(shaderProgram, \"aVertexPosition\")\n\tconst projectionMatrix = gl.getUniformLocation(shaderProgram, \"uProjectionMatrix\")\n\tconst modelViewMatrix = gl.getUniformLocation(shaderProgram, \"uModelViewMatrix\")\n\tif (vertexPosition === null || vertexPosition === -1) {\n\t\tconsole.warn(\"get vertex position error\")\n\t}\n\tif (projectionMatrix === null || projectionMatrix === -1) {\n\t\tconsole.warn(\"get projection matrix error\")\n\t}\n\tif (modelViewMatrix === null || modelViewMatrix === -1) {\n\t\tconsole.warn(\"get model view matrix error\")\n\t}\n\n\tif (\n\t\tvertexPosition === null || projectionMatrix === null || modelViewMatrix === null ||\n\t\tvertexPosition === -1 || projectionMatrix === -1 || modelViewMatrix === -1\n\t) {\n\t\treturn null\n\t}\n\n\n\tconst programInfo = new ProgramInfo(\n\t\tshaderProgram,\n\t\t{\n\t\t\tvertexPosition: vertexPosition,\n\t\t},\n\t\t{\n\t\t\tprojectionMatrix: projectionMatrix,\n\t\t\tmodelViewMatrix: modelViewMatrix,\n\t\t}\n\t)\n\n\treturn programInfo\n}\n","import { initShaderProgram } from \"./ShaderCompiler\"\nimport type { ProgramInfoInterface } from \"./ShaderProgramInterface\"\n\n\ntype AttribLocations = {\n\tvertexPosition: number,\n\tvertexColor: number,\n}\n\n\ntype UniformLocations = {\n\tprojectionMatrix: WebGLUniformLocation,\n\tmodelViewMatrix: WebGLUniformLocation,\n}\n\n\nexport class ProgramInfo implements ProgramInfoInterface {\n\tprogram: WebGLProgram\n\tattribLocations: Map<string, number>\n\tuniformLocations: Map<string, WebGLUniformLocation>\n\n\tconstructor(program: WebGLProgram, attribLocations: AttribLocations, uniformLocations: UniformLocations) {\n\t\tthis.program = program\n\t\tthis.attribLocations = new Map(Object.entries(attribLocations))\n\t\tthis.uniformLocations = new Map(Object.entries(uniformLocations))\n\t}\n\n\tgetProgram(): WebGLProgram {\n\t\treturn this.program\n\t}\n\n\tgetAttribLocation(name: string): number | undefined {\n\t\treturn this.attribLocations.get(name)\n\t}\n\n\tgetUniformLocation(name: string): WebGLUniformLocation | undefined {\n\t\treturn this.uniformLocations.get(name)\n\t}\n}\n\n\n// 頂点シェーダプログラムのソースコード\nconst vsSource = `\n\tattribute vec4 aVertexPosition;\n\tattribute vec4 aVertexColor;\n\n\tuniform mat4 uModelViewMatrix;\n\tuniform mat4 uProjectionMatrix;\n\n\tvarying lowp vec4 vColor;\n\n\tvoid main() {\n\t\tgl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n\t\tvColor = aVertexColor;\n\t}\n`\n\n// ピクセルシェーダプログラムのソースコード\nconst fsSource = `\n\tvarying lowp vec4 vColor;\n\n\tvoid main() {\n\t\tgl_FragColor = vColor;\n\t}\n`\n\n\nexport function createShaderProgram(gl: WebGL2RenderingContext): ProgramInfo | null {\n\tconst shaderProgram = initShaderProgram(gl, vsSource, fsSource)\n\tif (shaderProgram === null) {\n\t\tconsole.warn(\"init shader program error\")\n\t\treturn null\n\t}\n\n\tconst vertexPosition = gl.getAttribLocation(shaderProgram, \"aVertexPosition\")\n\tconst vertexColor = gl.getAttribLocation(shaderProgram, \"aVertexColor\")\n\tconst projectionMatrix = gl.getUniformLocation(shaderProgram, \"uProjectionMatrix\")\n\tconst modelViewMatrix = gl.getUniformLocation(shaderProgram, \"uModelViewMatrix\")\n\tif (vertexPosition === null || vertexPosition === -1) {\n\t\tconsole.warn(\"get vertex position error\")\n\t}\n\tif (vertexColor === null || vertexColor === -1) {\n\t\tconsole.warn(\"get vertex color error\")\n\t}\n\tif (projectionMatrix === null || projectionMatrix === -1) {\n\t\tconsole.warn(\"get projection matrix error\")\n\t}\n\tif (modelViewMatrix === null || modelViewMatrix === -1) {\n\t\tconsole.warn(\"get model view matrix error\")\n\t}\n\n\tif (\n\t\tvertexPosition === null || vertexPosition === -1 ||\n\t\tvertexColor === null || vertexColor === -1 ||\n\t\tprojectionMatrix === null || projectionMatrix === -1 ||\n\t\tmodelViewMatrix === null || modelViewMatrix === -1\n\t) {\n\t\treturn null\n\t}\n\n\tconst programInfo = new ProgramInfo(\n\t\tshaderProgram,\n\t\t{\n\t\t\tvertexPosition: vertexPosition,\n\t\t\tvertexColor: vertexColor,\n\t\t},\n\t\t{\n\t\t\tprojectionMatrix: projectionMatrix,\n\t\t\tmodelViewMatrix: modelViewMatrix,\n\t\t}\n\t)\n\n\treturn programInfo\n}\n"],"names":[],"mappings":";AAyCkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQlB;AAGkB;AAAA;AAAA;AAIlB;ACdkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAalB;AAGkB;AAAA;AAAA;AAAA;AAAA;AAMlB"}